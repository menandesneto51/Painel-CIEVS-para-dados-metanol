<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Painel de Monitoramento ‚Äì Intoxica√ß√£o por Suspeita de Metanol (SES-MT)</title>

  <!-- Tailwind CSS via CDN -->
  <script src="https://cdn.tailwindcss.com"></script>

  <!-- React 18, ReactDOM 18 e Babel via CDN -->
  <script src="https://unpkg.com/react@18/umd/react.production.min.js" crossorigin></script>
  <script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js" crossorigin></script>
  <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
</head>
<body class="bg-gray-100">
  <div id="root"></div>

  <!-- C√≥digo React + JSX -->
  <script type="text/babel" data-presets="env,react">
    const { useEffect, useMemo, useState } = React;

    const App = () => {
      const TIMEZONE = "America/Sao_Paulo";

      // Data din√¢mica sempre √†s 10h do dia atual (fixada √†s 10h)
      const lastUpdate = useMemo(() => {
        const now = new Date();
        const day = new Intl.DateTimeFormat("pt-BR", {
          timeZone: TIMEZONE,
          day: "2-digit",
        }).format(now);
        const monthRaw = new Intl.DateTimeFormat("pt-BR", {
          timeZone: TIMEZONE,
          month: "long",
        }).format(now);
        const month = monthRaw.charAt(0).toUpperCase() + monthRaw.slice(1);
        const year = new Intl.DateTimeFormat("pt-BR", {
          timeZone: TIMEZONE,
          year: "numeric",
        }).format(now);
        return `${day} de ${month} de ${year} √†s 10h`;
      }, []);

      const [activeTab, setActiveTab] = useState("geral"); // 'geral' | 'confirmados' | 'investigacao' | 'descartados' | 'mapa'
      const [selectedCase, setSelectedCase] = useState(null);
      const [animateCards, setAnimateCards] = useState(false);

      useEffect(() => {
        setAnimateCards(true);
      }, []);

      // ======================
      // DADOS DOS CASOS (13 NOTIFICADOS)
      // 4 confirmados | 3 em investiga√ß√£o | 6 descartados
      // Com resid√™ncia, interna√ß√£o, gravidade, evolu√ß√£o,
      // necessidade de hospitaliza√ß√£o, perman√™ncia e ant√≠doto
      // ======================

      // 4 confirmados (gravidade Grave)
      const casosConfirmados = [
        {
          id: 1,
          status: "CONFIRMADO",
          municipioResidencia: "V√°rzea Grande",
          municipioInternacao: "V√°rzea Grande",
          cidade: "V√°rzea Grande",
          perfil: "Masculino, 24 anos",
          descricao: null,
          statusColor: "bg-red-600",
          borderColor: "border-red-400",
          data: "20/10/2025",
          gravidade: "Grave",
          evolucao: "Em acompanhamento",
          necessitouHospitalizacao: "Sim",
          permaneceHospitalizado: "N√£o",
          recebeuAntidoto: "Sim",
        },
        {
          id: 10,
          status: "CONFIRMADO",
          municipioResidencia: "V√°rzea Grande",
          municipioInternacao: "V√°rzea Grande",
          cidade: "V√°rzea Grande",
          perfil: "Feminino, 30 anos",
          descricao: "Paciente encaminhada por familiares j√° em √≥bito. Investiga√ß√£o conduzida pelo SVO.",
          statusColor: "bg-red-600",
          borderColor: "border-red-400",
          data: "06/11/2025",
          gravidade: "Grave",
          evolucao: "√ìbito por intoxica√ß√£o por metanol",
          necessitouHospitalizacao: "N√£o",   // chegou j√° em √≥bito
          permaneceHospitalizado: "N√£o",
          recebeuAntidoto: "N√£o",
        },
        {
          id: 8,
          status: "CONFIRMADO",
          municipioResidencia: "Itanhang√°",
          municipioInternacao: "Sorriso",
          cidade: "Itanhang√°",
          perfil: "Masculino, 26 anos",
          descricao: null,
          statusColor: "bg-red-600",
          borderColor: "border-red-400",
          data: "03/11/2025",
          gravidade: "Grave",
          evolucao: "Em acompanhamento",
          necessitouHospitalizacao: "Sim",
          permaneceHospitalizado: "N√£o",
          recebeuAntidoto: "N√£o",
        },
        {
          id: 9,
          status: "CONFIRMADO",
          municipioResidencia: "Itanhang√°",
          municipioInternacao: "Sorriso",
          cidade: "Itanhang√°",
          perfil: "Feminino, 42 anos",
          descricao: null,
          statusColor: "bg-red-600",
          borderColor: "border-red-400",
          data: "03/11/2025",
          gravidade: "Grave",
          evolucao: "Permanece internada em Sorriso",
          necessitouHospitalizacao: "Sim",
          permaneceHospitalizado: "Sim",
          recebeuAntidoto: "Sim",
        },
      ];

      // 3 em investiga√ß√£o (gravidade Grave)
      const casosEmInvestigacao = [
        {
          id: 13,
          status: "EM INVESTIGA√á√ÉO",
          municipioResidencia: "Nova Brasil√¢ndia",
          municipioInternacao: "Cuiab√°",
          cidade: "Nova Brasil√¢ndia ‚Üí Internado em Cuiab√°",
          perfil: "Masculino, 33 anos",
          descricao: "Aguardando resultado laboratorial.",
          statusColor: "bg-yellow-500",
          borderColor: "border-yellow-400",
          data: "17/11/2025",
          gravidade: "Grave",
          evolucao: "Em investiga√ß√£o, internado em Cuiab√°",
          necessitouHospitalizacao: "Sim",
          permaneceHospitalizado: "Sim",
          recebeuAntidoto: "Sim",
        },
        {
          id: 14,
          status: "EM INVESTIGA√á√ÉO",
          municipioResidencia: "Quer√™ncia",
          municipioInternacao: "Barra do Gar√ßas",
          cidade: "Quer√™ncia ‚Üí Internado em Barra do Gar√ßas",
          perfil: "Masculino, 24 anos",
          descricao: "Aguardando resultado laboratorial.",
          statusColor: "bg-yellow-500",
          borderColor: "border-yellow-400",
          data: "18/11/2025",
          gravidade: "Grave",
          evolucao: "Em investiga√ß√£o, internado em Barra do Gar√ßas",
          necessitouHospitalizacao: "Sim",
          permaneceHospitalizado: "Sim",
          recebeuAntidoto: "N√£o",
        },
        {
          id: 2,
          status: "EM INVESTIGA√á√ÉO",
          municipioResidencia: "√Ågua Boa",
          municipioInternacao: "Goi√¢nia",
          cidade: "√Ågua Boa ‚Üí Internado em Goi√¢nia",
          perfil: "Masculino, 27 anos",
          descricao: "Paciente permanece internado. Aguarda resultado laboratorial.",
          statusColor: "bg-yellow-500",
          borderColor: "border-yellow-400",
          data: "21/10/2025",
          gravidade: "Grave",
          evolucao: "Em investiga√ß√£o, internado em Goi√¢nia",
          necessitouHospitalizacao: "Sim",
          permaneceHospitalizado: "Sim",
          recebeuAntidoto: "Sim",
        },
      ];

      // 6 descartados (gravidade N√£o se aplica)
      const casosDescartados = [
        {
          id: 12,
          status: "DESCARTADO",
          municipioResidencia: "Nova Mutum",
          municipioInternacao: "Nova Mutum",
          cidade: "Nova Mutum",
          perfil: "Masculino, 30 anos",
          descricao:
            "Exame toxicol√≥gico laboratorial negativo para metanol. Caso descartado clinicamente.",
          statusColor: "bg-green-700",
          borderColor: "border-green-400",
          data: "05/10/2025",
          tipo: "Descartado",
          gravidade: "N√£o se aplica",
          evolucao: "Caso descartado",
          necessitouHospitalizacao: "Sim",
          permaneceHospitalizado: "N√£o",
          recebeuAntidoto: "N√£o",
        },
        {
          id: 4,
          status: "DESCARTADO",
          municipioResidencia: "V√°rzea Grande",
          municipioInternacao: "V√°rzea Grande",
          cidade: "V√°rzea Grande",
          perfil: "Masculino, 40 anos",
          descricao:
            "Exame toxicol√≥gico laboratorial negativo para metanol em amostra biol√≥gica. Caso descartado conforme crit√©rios cl√≠nico-laboratoriais.",
          statusColor: "bg-green-700",
          borderColor: "border-green-400",
          data: "24/10/2025",
          tipo: "√ìbito - Descartado",
          gravidade: "N√£o se aplica",
          evolucao: "√ìbito por outras causas",
          necessitouHospitalizacao: "Sim",
          permaneceHospitalizado: "N√£o",
          recebeuAntidoto: "Sim",
        },
        {
          id: 5,
          status: "DESCARTADO",
          municipioResidencia: "Cuiab√°",
          municipioInternacao: "Cuiab√°",
          cidade: "Cuiab√°",
          perfil: "Feminino, 18 anos",
          descricao:
            "Exame toxicol√≥gico laboratorial negativo para metanol em amostra biol√≥gica. Caso descartado conforme crit√©rios cl√≠nico-laboratoriais.",
          statusColor: "bg-green-700",
          borderColor: "border-green-400",
          data: "28/10/2025",
          tipo: "Descartado",
          gravidade: "N√£o se aplica",
          evolucao: "Caso descartado",
          necessitouHospitalizacao: "Sim",
          permaneceHospitalizado: "N√£o",
          recebeuAntidoto: "N√£o",
        },
        {
          id: 6,
          status: "DESCARTADO",
          municipioResidencia: "Sorriso",
          municipioInternacao: "Sorriso",
          cidade: "Sorriso",
          perfil: "Masculino, 30 anos",
          descricao:
            "Exame toxicol√≥gico laboratorial negativo para metanol em amostra biol√≥gica. Caso descartado conforme crit√©rios cl√≠nico-laboratoriais.",
          statusColor: "bg-green-700",
          borderColor: "border-green-400",
          data: "19/10/2025",
          tipo: "Descartado",
          gravidade: "N√£o se aplica",
          evolucao: "Caso descartado",
          necessitouHospitalizacao: "Sim",
          permaneceHospitalizado: "N√£o",
          recebeuAntidoto: "N√£o",
        },
        {
          id: 7,
          status: "DESCARTADO",
          municipioResidencia: "Peixoto de Azevedo",
          municipioInternacao: "Peixoto de Azevedo",
          cidade: "Peixoto de Azevedo",
          perfil: "Feminino, 38 anos",
          descricao: "Caso descartado pela equipe de vigil√¢ncia.",
          statusColor: "bg-green-700",
          borderColor: "border-green-400",
          data: "20/10/2025",
          tipo: "Descartado",
          gravidade: "N√£o se aplica",
          evolucao: "Caso descartado",
          necessitouHospitalizacao: "Sim",
          permaneceHospitalizado: "N√£o",
          recebeuAntidoto: "N√£o",
        },
        {
          id: 11,
          status: "DESCARTADO",
          municipioResidencia: "V√°rzea Grande",
          municipioInternacao: "V√°rzea Grande",
          cidade: "V√°rzea Grande",
          perfil: "Masculino, 40 anos",
          descricao:
            "Exame toxicol√≥gico laboratorial negativo para metanol em amostra biol√≥gica. Caso descartado conforme crit√©rios cl√≠nico-laboratoriais.",
          statusColor: "bg-green-700",
          borderColor: "border-green-400",
          data: "22/10/2025",
          tipo: "Descartado",
          gravidade: "N√£o se aplica",
          evolucao: "Caso descartado",
          necessitouHospitalizacao: "Sim",
          permaneceHospitalizado: "N√£o",
          recebeuAntidoto: "N√£o",
        },
      ];

      const todosCasos = [
        ...casosConfirmados,
        ...casosEmInvestigacao,
        ...casosDescartados,
      ];

      // ======================
      // KPIs CALCULADOS
      // ======================
      const totalNotificado = todosCasos.length; // 13
      const totalConfirmado = casosConfirmados.length; // 4
      const totalEmInvestigacao = casosEmInvestigacao.length; // 3
      const totalDescartado = casosDescartados.length; // 6

      // √ìbitos por metanol
      const totalObitosMetanol = todosCasos.filter(
        (caso) => caso.evolucao === "√ìbito por intoxica√ß√£o por metanol"
      ).length;

      // Casos atualmente internados
      const totalInternadosAtualmente = todosCasos.filter(
        (caso) => String(caso.permaneceHospitalizado).toLowerCase() === "sim"
      ).length;

      // Casos que receberam ant√≠doto
      const totalReceberamAntidoto = todosCasos.filter(
        (caso) => String(caso.recebeuAntidoto).toLowerCase() === "sim"
      ).length;

      const kpiData = [
        {
          label: "Total Notificado",
          value: totalNotificado,
          icon: "üë•",
          borderColor: "border-blue-600",
          textColor: "text-blue-700",
          iconColor: "text-blue-600",
        },
        {
          label: "Confirmado",
          value: totalConfirmado,
          icon: "‚ö†Ô∏è",
          borderColor: "border-red-600",
          textColor: "text-red-700",
          iconColor: "text-red-600",
        },
        {
          label: "Em Investiga√ß√£o",
          value: totalEmInvestigacao,
          icon: "üîç",
          borderColor: "border-yellow-600",
          textColor: "text-yellow-700",
          iconColor: "text-yellow-600",
        },
        {
          label: "Descartados",
          value: totalDescartado,
          icon: "‚úÖ",
          borderColor: "border-green-600",
          textColor: "text-green-700",
          iconColor: "text-green-600",
        },
        {
          label: "√ìbitos por metanol",
          value: totalObitosMetanol,
          icon: "‚ò†Ô∏è",
          borderColor: "border-gray-700",
          textColor: "text-gray-800",
          iconColor: "text-gray-700",
        },
        {
          label: "Casos atualmente internados",
          value: totalInternadosAtualmente,
          icon: "üè•",
          borderColor: "border-orange-500",
          textColor: "text-orange-700",
          iconColor: "text-orange-500",
        },
        {
          label: "Receberam ant√≠doto",
          value: totalReceberamAntidoto,
          icon: "üíâ",
          borderColor: "border-indigo-500",
          textColor: "text-indigo-700",
          iconColor: "text-indigo-500",
        },
      ];

      // ======================
      // DISTRIBUI√á√ÉO POR MUNIC√çPIO (MAPA)
      // ======================
      const cidadesAfetadas = Object.values(
        todosCasos.reduce((acc, caso) => {
          const baseResidencia = caso.municipioResidencia || caso.cidade;
          const nomeCidade = baseResidencia.includes("(HPSMVG)")
            ? "V√°rzea Grande"
            : baseResidencia;

          if (!acc[nomeCidade]) {
            acc[nomeCidade] = {
              cidade: nomeCidade,
              casos: 0,
              internacoes: {},
            };
          }

          acc[nomeCidade].casos += 1;

          const localInternacao = caso.municipioInternacao || nomeCidade;
          if (!acc[nomeCidade].internacoes[localInternacao]) {
            acc[nomeCidade].internacoes[localInternacao] = 0;
          }
          acc[nomeCidade].internacoes[localInternacao] += 1;

          return acc;
        }, {})
      ).sort((a, b) => b.casos - a.casos);

      // ======================
      // HELPERS
      // ======================

      const getDescricaoPadrao = (caso) => {
        if (caso.status === "CONFIRMADO") {
          return "Exame toxicol√≥gico laboratorial positivo para metanol em amostra biol√≥gica. Caso confirmado conforme crit√©rios cl√≠nico-laboratoriais.";
        }
        if (caso.descricao) {
          return caso.descricao;
        }
        if (caso.status === "EM INVESTIGA√á√ÉO") {
          return "Aguardando resultado laboratorial.";
        }
        if (caso.status === "DESCARTADO") {
          return "Caso descartado conforme crit√©rios cl√≠nico-laboratoriais.";
        }
        return "";
      };

      const getGravidadeClasses = (gravidade) => {
        if (gravidade === "Grave") {
          return "bg-red-50 text-red-700 border-red-100";
        }
        if (gravidade === "N√£o se aplica") {
          return "bg-gray-50 text-gray-700 border-gray-100";
        }
        return "bg-gray-50 text-gray-700 border-gray-100";
      };

      const formatStatusSimNao = (valor) => {
        if (valor === null || valor === undefined) return "N√£o informado";
        const v = String(valor).toLowerCase();
        if (v === "sim") return "Sim";
        if (v === "nao" || v === "n√£o") return "N√£o";
        return "N√£o informado";
      };

      // LISTA DE CASOS (cards)
      const renderListaCasos = (lista, corBordaEsquerda) => (
        <div className={"bg-white p-6 rounded-xl shadow-lg border-l-8 " + corBordaEsquerda}>
          <div className="space-y-4">
            {lista.map((caso) => (
              <div
                key={caso.id}
                className="border border-gray-200 rounded-lg p-4 hover:shadow-md transition-shadow duration-300 cursor-pointer"
                onClick={() => setSelectedCase(caso)}
              >
                <div className="flex items-start gap-3">
                  <span
                    className={
                      caso.statusColor +
                      " text-white text-xs font-bold px-3 py-1 rounded-full whitespace-nowrap"
                    }
                  >
                    {caso.status}
                  </span>
                  <div className="flex-1">
                    <div className="flex items-center gap-2 mb-1">
                      <span className="text-gray-500 text-lg">üìç</span>
                      <span className="font-semibold text-gray-800">
                        Resid√™ncia: {caso.municipioResidencia || caso.cidade}
                      </span>
                    </div>
                    {caso.municipioInternacao && (
                      <p className="text-xs text-gray-500 mb-1">
                        Interna√ß√£o: {caso.municipioInternacao}
                      </p>
                    )}
                    <p className="text-sm text-gray-500 mb-1">({caso.perfil})</p>
                    <p className="text-xs text-gray-400 mb-1">{caso.data}</p>
                    <p className="text-sm text-gray-600 border-l-2 border-gray-300 pl-3">
                      {getDescricaoPadrao(caso)}
                    </p>
                    <p className="text-xs text-gray-500 mt-1">
                      <span className="font-semibold">Evolu√ß√£o:</span> {caso.evolucao}
                    </p>
                    {caso.gravidade && (
                      <p className="text-xs text-gray-500 mt-1">
                        <span className="font-semibold">Gravidade:</span> {caso.gravidade}
                      </p>
                    )}
                    <p className="text-xs text-gray-500 mt-1">
                      <span className="font-semibold">Necessitou hospitaliza√ß√£o:</span>{" "}
                      {formatStatusSimNao(caso.necessitouHospitalizacao)}
                    </p>
                    <p className="text-xs text-gray-500 mt-1">
                      <span className="font-semibold">Permanece hospitalizado:</span>{" "}
                      {formatStatusSimNao(caso.permaneceHospitalizado)}
                    </p>
                    <p className="text-xs text-gray-500 mt-1">
                      <span className="font-semibold">Recebeu ant√≠doto:</span>{" "}
                      {formatStatusSimNao(caso.recebeuAntidoto)}
                    </p>
                  </div>
                </div>
              </div>
            ))}
          </div>
        </div>
      );

      // ======================
      // RENDER PRINCIPAL
      // ======================

      return (
        <div className="min-h-screen bg-gradient-to-br from-gray-50 to-blue-50 font-sans">
          {/* Header com Logos */}
          <div className="bg-white shadow-sm border-b border-gray-200">
            <div className="container mx-auto px-4 py-4">
              <div className="flex flex-wrap justify-between items-center gap-4">
                <img
                  src="https://raw.githubusercontent.com/luishgm/imagens-para-projetos/main/logos/cievs.png"
                  alt="CIEVS MT"
                  className="h-12 md:h-16 object-contain"
                  onError={(e) => {
                    e.currentTarget.style.display = "none";
                  }}
                />
                <img
                  src="https://raw.githubusercontent.com/luishgm/imagens-para-projetos/main/logos/rede-cievs.png"
                  alt="Rede CIEVS"
                  className="h-12 md:h-16 object-contain"
                  onError={(e) => {
                    e.currentTarget.style.display = "none";
                  }}
                />
                <img
                  src="https://raw.githubusercontent.com/luishgm/imagens-para-projetos/main/logos/logo-governo-mato-grosso.png"
                  alt="Governo MT"
                  className="h-12 md:h-16 object-contain"
                  onError={(e) => {
                    e.currentTarget.style.display = "none";
                  }}
                />
              </div>
            </div>
          </div>

          <div className="container mx-auto px-4 py-8">
            {/* T√≠tulo */}
            <div className="text-center mb-8">
              <h1 className="text-3xl md:text-5xl font-bold text-gray-800 mb-2">
                Painel de Monitoramento
              </h1>
              <p className="text-lg md:text-xl text-blue-600 font-semibold">
                Intoxica√ß√£o por Suspeita de Metanol (SES-MT)
              </p>
            </div>

            {/* Barra de Atualiza√ß√£o */}
            <div className="bg-gradient-to-r from-yellow-50 to-amber-50 border-l-4 border-yellow-500 p-4 rounded-lg mb-8 shadow-md">
              <div className="flex flex-col md:flex-row items-center justify-center gap-2 text-center">
                <div className="flex items-center gap-2">
                  <span className="text-yellow-600 text-lg">üìÖ</span>
                  <span className="font-semibold text-yellow-800">√öltima Atualiza√ß√£o:</span>
                </div>
                <span className="text-yellow-700">{lastUpdate}</span>
              </div>
            </div>

            {/* KPIs */}
            <div className="grid grid-cols-2 md:grid-cols-3 lg:grid-cols-7 gap-4 md:gap-6 mb-10">
              {kpiData.map((kpi, index) => (
                <div
                  key={kpi.label}
                  className={
                    "bg-white p-4 md:p-6 rounded-lg shadow-md border-t-4 " +
                    kpi.borderColor +
                    " transform transition-all duration-500 hover:scale-105 hover:shadow-lg " +
                    (animateCards ? "opacity-100 translate-y-0" : "opacity-0 translate-y-4")
                  }
                  style={{ transitionDelay: index * 100 + "ms" }}
                >
                  <div className="flex items-center justify-between mb-3 md:mb-4">
                    <span className="text-[10px] md:text-xs font-medium text-gray-600 uppercase tracking-wide leading-tight">
                      {kpi.label}
                    </span>
                    <span className={"text-xl md:text-2xl " + kpi.iconColor}>{kpi.icon}</span>
                  </div>
                  <div className="flex flex-col md:flex-row items-baseline gap-1 md:gap-2">
                    <span
                      className={
                        "text-3xl md:text-5xl font-bold " + kpi.textColor + " leading-none"
                      }
                    >
                      {kpi.value}
                    </span>
                    <span className="text-xs md:text-base text-gray-600">
                      {kpi.label.startsWith("√ìbitos")
                        ? (kpi.value === 1 ? "√≥bito" : "√≥bitos")
                        : kpi.label.startsWith("Casos atualmente internados")
                        ? (kpi.value === 1 ? "caso" : "casos")
                        : kpi.label.startsWith("Receberam ant√≠doto")
                        ? (kpi.value === 1 ? "caso" : "casos")
                        : kpi.value === 1
                        ? "caso"
                        : "casos"}
                    </span>
                  </div>
                </div>
              ))}
            </div>

            {/* Tabs */}
            <div className="flex flex-wrap gap-2 mb-8 bg-white p-2 rounded-lg shadow-md">
              <button
                onClick={() => setActiveTab("geral")}
                className={
                  "flex-1 min-w-[120px] px-4 py-3 rounded-lg font-semibold text-sm md:text-base transition-all dura√ß√£o-300 " +
                  (activeTab === "geral"
                    ? "bg-blue-600 text-white shadow-lg transform scale-105"
                    : "bg-gray-100 text-gray-600 hover:bg-gray-200")
                }
              >
                Vis√£o Geral
              </button>
              <button
                onClick={() => setActiveTab("confirmados")}
                className={
                  "flex-1 min-w-[120px] px-4 py-3 rounded-lg font-semibold text-sm md:text-base transition-all dura√ß√£o-300 " +
                  (activeTab === "confirmados"
                    ? "bg-red-600 text-white shadow-lg transform scale-105"
                    : "bg-gray-100 text-gray-600 hover:bg-gray-200")
                }
              >
                Confirmados
              </button>
              <button
                onClick={() => setActiveTab("investigacao")}
                className={
                  "flex-1 min-w-[120px] px-4 py-3 rounded-lg font-semibold text-sm md:text-base transition-all dura√ß√£o-300 " +
                  (activeTab === "investigacao"
                    ? "bg-yellow-500 text-white shadow-lg transform scale-105"
                    : "bg-gray-100 text-gray-600 hover:bg-gray-200")
                }
              >
                Em Investiga√ß√£o
              </button>
              <button
                onClick={() => setActiveTab("descartados")}
                className={
                  "flex-1 min-w-[120px] px-4 py-3 rounded-lg font-semibold text-sm md:text-base transition-all dura√ß√£o-300 " +
                  (activeTab === "descartados"
                    ? "bg-green-600 text-white shadow-lg transform scale-105"
                    : "bg-gray-100 text-gray-600 hover:bg-gray-200")
                }
              >
                Descartados
              </button>
              <button
                onClick={() => setActiveTab("mapa")}
                className={
                  "flex-1 min-w-[120px] px-4 py-3 rounded-lg font-semibold text-sm md:text-base transition-all dura√ß√£o-300 " +
                  (activeTab === "mapa"
                    ? "bg-purple-600 text-white shadow-lg transform scale-105"
                    : "bg-gray-100 text-gray-600 hover:bg-gray-200")
                }
              >
                Mapa
              </button>
            </div>

            {/* Conte√∫do das Tabs */}
            {activeTab === "geral" && (
              <div className="grid grid-cols-1 lg:grid-cols-3 gap-8">
                <div>
                  <h3 className="text-lg font-bold text-red-700 mb-4 flex items-center gap-2">
                    <span>‚ö†Ô∏è</span> Confirmados
                  </h3>
                  {renderListaCasos(casosConfirmados, "border-red-600")}
                </div>
                <div>
                  <h3 className="text-lg font-bold text-yellow-700 mb-4 flex items-center gap-2">
                    <span>üîç</span> Em Investiga√ß√£o
                  </h3>
                  {renderListaCasos(casosEmInvestigacao, "border-yellow-500")}
                </div>
                <div>
                  <h3 className="text-lg font-bold text-green-700 mb-4 flex items-center gap-2">
                    <span>‚úÖ</span> Descartados
                  </h3>
                  {renderListaCasos(casosDescartados, "border-green-600")}
                </div>
              </div>
            )}

            {activeTab === "confirmados" && (
              <div>
                <h3 className="text-2xl font-bold text-red-700 mb-6 flex items-center gap-2">
                  <span>‚ö†Ô∏è</span> Casos Confirmados
                </h3>
                {renderListaCasos(casosConfirmados, "border-red-600")}
              </div>
            )}

            {activeTab === "investigacao" && (
              <div>
                <h3 className="text-2xl font-bold text-yellow-700 mb-6 flex items-center gap-2">
                  <span>üîç</span> Casos em Investiga√ß√£o
                </h3>
                {renderListaCasos(casosEmInvestigacao, "border-yellow-500")}
              </div>
            )}

            {activeTab === "descartados" && (
              <div>
                <h3 className="text-2xl font-bold text-green-700 mb-6 flex items-center gap-2">
                  <span>‚úÖ</span> Casos Descartados
                </h3>
                {renderListaCasos(casosDescartados, "border-green-600")}
              </div>
            )}

            {activeTab === "mapa" && (
              <div className="bg-white p-6 rounded-xl shadow-lg">
                <h3 className="text-2xl font-bold text-purple-700 mb-3 flex items-center gap-2">
                  <span>üìç</span>
                  Distribui√ß√£o de Casos por Munic√≠pio (Resid√™ncia)
                </h3>
                <p className="text-sm text-gray-600 mb-6">
                  Propor√ß√£o dos{" "}
                  <span className="font-semibold">{totalNotificado} casos notificados</span>{" "}
                  distribu√≠dos entre os munic√≠pios de resid√™ncia dos pacientes. O segmento em vermelho
                  indica o munic√≠pio com maior n√∫mero de casos. A tooltip e a legenda apresentam
                  tamb√©m a distribui√ß√£o dos locais de interna√ß√£o.
                </p>

                {/* Barra √∫nica empilhada */}
                <div className="w-full mb-8">
                  <div className="h-8 md:h-10 bg-gray-200 rounded-full overflow-hidden flex shadow-inner">
                    {cidadesAfetadas.map((cidade, index) => {
                      const largura = (cidade.casos / totalNotificado) * 100;
                      const isTop = index === 0;
                      const baseClass = isTop ? "bg-red-600" : "bg-purple-500";
                      const finalColor = !isTop && index % 2 !== 0 ? "bg-purple-400" : baseClass;

                      const detalhesInternacao = Object.entries(cidade.internacoes)
                        .map(
                          ([loc, qtd]) =>
                            `${loc}: ${qtd} ${qtd === 1 ? "caso" : "casos"}`
                        )
                        .join(" | ");

                      return (
                        <div
                          key={cidade.cidade}
                          className={
                            finalColor +
                            " h-full flex items-center justify-center text-[10px] md:text-xs text-white font-semibold border-r border-white/20 last:border-0"
                          }
                          style={{ width: largura + "%" }}
                          title={
                            cidade.cidade +
                            " - " +
                            cidade.casos +
                            " " +
                            (cidade.casos === 1 ? "caso" : "casos") +
                            " | Interna√ß√£o: " +
                            detalhesInternacao
                          }
                        >
                          {largura > 15 && <span>{cidade.cidade}</span>}
                        </div>
                      );
                    })}
                  </div>
                </div>

                {/* Legenda */}
                <div className="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4">
                  {cidadesAfetadas.map((cidade, index) => {
                    const percentual = ((cidade.casos / totalNotificado) * 100).toFixed(1);
                    const isTop = index === 0;

                    const detalhesInternacao = Object.entries(cidade.internacoes)
                      .map(
                        ([loc, qtd]) =>
                          `${loc}: ${qtd} ${qtd === 1 ? "caso" : "casos"}`
                      )
                      .join(" | ");

                    return (
                      <div
                        key={"legenda-" + cidade.cidade}
                        className="flex items-center justify-between border border-gray-200 rounded-lg px-4 py-3 hover:bg-gray-50 transition-colors"
                      >
                        <div className="flex items-center gap-3">
                          <span
                            className={
                              "w-4 h-4 rounded-full shadow-sm " +
                              (isTop ? "bg-red-600" : "bg-purple-500")
                            }
                          ></span>
                          <span className="font-semibold text-gray-800 text-sm">
                            {cidade.cidade}
                          </span>
                        </div>
                        <div className="text-right text-gray-600">
                          <div className="text-sm font-bold">
                            {cidade.casos} {cidade.casos === 1 ? "caso" : "casos"}
                          </div>
                          <div className="text-xs text-gray-400">
                            {percentual}% ‚Äì Interna√ß√£o: {detalhesInternacao}
                          </div>
                        </div>
                      </div>
                    );
                  })}
                </div>
              </div>
            )}

            {/* Modal de Detalhes */}
            {selectedCase && (
              <div
                className="fixed inset-0 bg-black bg-opacity-50 backdrop-blur-sm flex items-center justify-center p-4 z-50"
                onClick={() => setSelectedCase(null)}
              >
                <div
                  className="bg-white rounded-xl p-6 md:p-8 max-w-2xl w-full shadow-2xl"
                  onClick={(e) => e.stopPropagation()}
                >
                  <div className="flex items-center justify-between mb-6">
                    <h3 className="text-2xl font-bold text-gray-800">Detalhes do Caso</h3>
                    <button
                      onClick={() => setSelectedCase(null)}
                      className="text-gray-400 hover:text-gray-600 transition-colors text-3xl leading-none"
                    >
                      &times;
                    </button>
                  </div>
                  <div className="space-y-6">
                    <div className="flex flex-wrap items-center gap-3">
                      <span
                        className={
                          selectedCase.statusColor +
                          " text-white text-sm font-bold px-4 py-2 rounded-full shadow-sm"
                        }
                      >
                        {selectedCase.status}
                      </span>
                      {selectedCase.gravidade && (
                        <span
                          className={
                            "px-3 py-1 rounded-full text-sm font-semibold border " +
                            getGravidadeClasses(selectedCase.gravidade)
                          }
                        >
                          Gravidade: {selectedCase.gravidade}
                        </span>
                      )}
                    </div>

                    <div className="bg-gray-50 rounded-lg p-4 border border-gray-100">
                      <div className="grid grid-cols-1 sm:grid-cols-2 gap-6 mb-4">
                        <div>
                          <p className="text-xs font-bold text-gray-400 uppercase tracking-wider mb-1">
                            Resid√™ncia
                          </p>
                          <p className="font-semibold text-gray-800 text-lg">
                            {selectedCase.municipioResidencia || selectedCase.cidade}
                          </p>
                        </div>
                        <div>
                          <p className="text-xs font-bold text-gray-400 uppercase tracking-wider mb-1">
                            Local de Interna√ß√£o
                          </p>
                          <p className="font-semibold text-gray-800 text-lg">
                            {selectedCase.municipioInternacao || "N√£o informado"}
                          </p>
                        </div>
                        <div>
                          <p className="text-xs font-bold text-gray-400 uppercase tracking-wider mb-1">
                            Data da Notifica√ß√£o
                          </p>
                          <p className="font-semibold text-gray-800 text-lg">
                            {selectedCase.data}
                          </p>
                        </div>
                        <div className="col-span-1 sm:col-span-2">
                          <p className="text-xs font-bold text-gray-400 uppercase tracking-wider mb-1">
                            Perfil do Paciente
                          </p>
                          <p className="font-semibold text-gray-800">
                            {selectedCase.perfil}
                          </p>
                        </div>
                      </div>
                    </div>

                    <div>
                      <p className="text-sm font-medium text-gray-500 mb-2">
                        Situa√ß√£o Cl√≠nica / Laboratorial
                      </p>
                      <p className="text-gray-700 bg-blue-50 p-4 rounded-lg border-l-4 border-blue-500 text-sm md:text-base leading-relaxed">
                        {getDescricaoPadrao(selectedCase)}
                      </p>
                    </div>

                    <div className="grid grid-cols-1 sm:grid-cols-2 gap-4">
                      <div className="bg-gray-50 rounded-lg p-3 border border-gray-100">
                        <p className="text-xs font-bold text-gray-400 uppercase tracking-wider mb-1">
                          Evolu√ß√£o
                        </p>
                        <p className="text-sm text-gray-700">
                          {selectedCase.evolucao}
                        </p>
                      </div>
                      <div className="bg-gray-50 rounded-lg p-3 border border-gray-100">
                        <p className="text-xs font-bold text-gray-400 uppercase tracking-wider mb-1">
                          Manejo Hospitalar
                        </p>
                        <p className="text-xs text-gray-700">
                          <span className="font-semibold">Necessitou hospitaliza√ß√£o:</span>{" "}
                          {formatStatusSimNao(selectedCase.necessitouHospitalizacao)}
                        </p>
                        <p className="text-xs text-gray-700 mt-1">
                          <span className="font-semibold">Permanece hospitalizado:</span>{" "}
                          {formatStatusSimNao(selectedCase.permaneceHospitalizado)}
                        </p>
                        <p className="text-xs text-gray-700 mt-1">
                          <span className="font-semibold">Recebeu ant√≠doto:</span>{" "}
                          {formatStatusSimNao(selectedCase.recebeuAntidoto)}
                        </p>
                      </div>
                    </div>
                  </div>

                  <div className="mt-8 flex justify-end">
                    <button
                      onClick={() => setSelectedCase(null)}
                      className="px-6 py-2 bg-gray-100 hover:bg-gray-200 text-gray-700 font-semibold rounded-lg transition-colors"
                    >
                      Fechar
                    </button>
                  </div>
                </div>
              </div>
            )}
          </div>
        </div>
      );
    };

    const root = ReactDOM.createRoot(document.getElementById("root"));
    root.render(<App />);
  </script>
</body>
</html>
